- name: Add floating IP as network interface alias
  template:
    src: network/interfaces.d/floating-ip.cfg
    dest: /etc/network/interfaces.d/floating-ip.cfg
    owner: root
    group: root
    mode: 0644

- name: Ensure floating alias is included in configuration file
  lineinfile:
    dest: /etc/network/interfaces
    state: present
    line: "source /etc/network/interfaces.d/*.cfg"

- name: Restart networking service
  service:
    name: networking
    state: restarted

- name: Bring up new interface
  command: "ifup {{ COMMON_FLOATING_INTERFACE_NAME }}"
